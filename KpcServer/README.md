# Hikari

* サーバ

## 仕様

* 運営サーバとの送受信を簡単にする
* TCP:25252 で待ち受け
* クライアントが繋いできたら、公式フォーマットを独自フォーマットに変換して問題を送信
* クライアントから独自フォーマットの回答が来たら、公式フォーマットに変換して、運営サーバに回答する
* クライアントは何台居ても良い
  * けど、画面に表示するのは、スコアが高い上位3台
* 運営サーバに回答する際は、今までで一番良い回答でなれば送信しない

## 使い方

1. 起動
2. クライアントを接続させる(別に後でもいいけど)
3. 回答URLや、問題ファイルのURLを指定する(Drag&Dropでローカルファイルの読み込みにも対応している)
4. 「開始」する(URLやファイルの読み込みに失敗した場合、起動しない)
5. あとはクライアントが勝手にやってくれる
6. 試合終了したかったら「終了」

## 工夫した点

* `Connection: Keep-Alive`を狙った
  * 「コネ作り」ボタンにより、試合開始前に適当なページにアクセスさせるように
* サーバのIPアドレスを表示するようにした
  * `ifconfig`とかするのは...
* 運営サーバに、短時間に送信する回答の数を減らした
  * JavaScriptの`setTimeout`のように
  * 250msにしたらダメっぽかった
  * 500msでも良いはずだが、安全を考慮して2000msとした

## 工夫したほうが良かった点

* 運営サーバの「error」に対応したほうが良かった
* そのクライアントを切断するとか
* errorの一つ前の回答を自動再送信とか
* 任意の回答の手動再送信とか

